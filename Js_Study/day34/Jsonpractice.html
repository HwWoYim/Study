<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ajax() 메서드와 JSON 데이터</title>
<style>
   table {
      width: 100%;
      border: 1px solid black;
   }
   th,td {
      border: 1px solid black;
      text-align: center;
   }
</style>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"
   integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
   crossorigin="anonymous"></script>
<script type="text/javascript">
   $.ajax({ // 비동기식 Ajax를 이용하여 HTTP 요청을 전송
      type: "GET", //HTTP 요청 방식(GET 과 POST가 존재)
      url: "data.json", // 요청보낼 url주소
      dataType: "json", // 서버에서 보내줄  데이터의 타입
      success: function(data){ // 요청이 성공할 때 호출되는 콜백함수의 data는 data.json의 전체데이터를 의미
         console.log("성공!");
         var elem=""; // var타입 'elem'변수 초기화(전역변수)
         
         $.each(data,function(index,obj){ //$each메소드는 obj와 배열 모두에서 사용할 수 있는 반복 함수, obj는 json파일에 저장된 개별객체를 의미
            // $.each() 메소드의 첫번째 매개변수로 json파일에서 선언한 배열 받음
            // 두번째 매개변수로는 콜백함수 중 첫 번째 index는 배열의 인덱스를 의미
            // 두번째 매개변수 obj는 해당 인덱스가 가진 값을 의미한다.
            elem+= "<tr>";
            elem+= "<td>"+obj.name+"</td>";
            elem+= "<td>"+obj.score1+"</td>";
            elem+= "<td>"+obj.score2+"</td>";
            elem+= "<td>"+obj.score3+"</td>";
            elem+= "<td>"+obj.score4+"</td>";
            elem+= "</tr>";
         });
         
         $("table tbody").append(elem); //$("선택한 요소").append(추가할 코드); 추가할 코드를 선택한요소에 추가하겠다 라는 뜻   
      },
      error: function(error){ // 에러확인
         console.log(error.status);
         console.log(error.errorText);
      }
   });
   // jQuery 라이브러리가 가진,
   // 비동기처리를 담당하는(실시간으로 데이터를 로드하는) 메서드
</script>
</head>
<body>

<table>
   <caption>학생들의 시험점수</caption>
   <thead>
      <tr>
         <th>이름</th>
         <th>시험1</th>
         <th>시험2</th>
         <th>시험3</th>
         <th>시험4</th>
      </tr>
   </thead>
   <tbody>
   </tbody>
</table>

</body>
</html>